# My_pdf_scaner

Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è PDF-–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞–∫ –æ–¥–∏–Ω–æ—á–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É PDF-—Ñ–∞–π–ª–æ–≤, —Ç–∞–∫ –∏ –ø–∞–∫–µ—Ç–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π —Å PDF-—Ñ–∞–π–ª–∞–º–∏. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON.

![–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ](img/work.png)

## ‚öôÔ∏è –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è      | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç                   |
|----------------|-----------------------------|
| –Ø–∑—ã–∫           | Python 3.11.9               |
| –í–µ–±-—Å–µ—Ä–≤–µ—Ä     | Flask 3.1.1                       |
| PDF-–ø–∞—Ä—Å–∏–Ω–≥    | [`PyMuPDF`](https://pymupdf.readthedocs.io/) (`fitz`)|
| Frontend       | HTML5 + Bootstrap-like —Ä–∞–∑–º–µ—Ç–∫–∞ |
| –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ  | `flask run` / WSGI |

## üìÅ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- `extract.py`: –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ PDF, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç Python-—Å–ª–æ–≤–∞—Ä—å;
- `runner.py`: –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏;
- `server.py`: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

#### runner.py
–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ `ThreadPoolExecutor`:

- —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ CPU-bound –∑–∞–¥–∞—á (–¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–∞—Ä—Å–∏–Ω–≥ PDF);
- –æ–±—Ä–∞–±–æ—Ç–∫–∞ **–¥–µ—Å—è—Ç–∫–æ–≤ PDF –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ**;
- –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ Flask.


```python
with ThreadPoolExecutor(max_workers=os.cpu_count()) as executor:
    futures = [executor.submit(process_single_pdf, path, output_dir) for path in pdf_files]
```


## –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å —Ñ–∞–π–ª–∞–º–∏
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç **–ø—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏**
2. Flask (server.py) –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST-–∑–∞–ø—Ä–æ—Å
3. –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ **–ø—É—Ç–∏ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏**, –µ—Å–ª–∏ –æ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π, –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –º–µ—Ç–æ–¥ process_pdf_folder()
4. –ú–µ—Ç–æ–¥ app/runner.py : process_pdf_folder(folder, output_dir) :
   1. –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å—Ç–æ–∫ PDF-—Ñ–∞–π–ª–æ–≤ `pdf_files = [file1.pdf, file2.pdf, ...]`
   2. –°–æ–∑–¥–∞–µ—Ç –ø—É–ª –ø–æ—Ç–æ–∫–æ–≤ (ThreadPoolExecutor)
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ü–æ—Ç–æ–∫ ‚Ññ1   ‚îÇ ‚îÇ  –ü–æ—Ç–æ–∫ ‚Ññ2   ‚îÇ ‚îÇ  –ü–æ—Ç–æ–∫ ‚Ññ3   ‚îÇ ...
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚Üë               ‚Üë               ‚Üë
     |               |               |
 –≥–æ—Ç–æ–≤ –∫ –ø—Ä–∏—ë–º—É   –≥–æ—Ç–æ–≤ –∫ –ø—Ä–∏—ë–º—É  –≥–æ—Ç–æ–≤ –∫ –ø—Ä–∏—ë–º—É
     –∑–∞–¥–∞—á           –∑–∞–¥–∞—á           –∑–∞–¥–∞—á
```
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤ –æ–±—ã—á–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —è–¥–µ—Ä CPU max_workers=os.cpu_count()

   3. –ó–∞–¥–∞—á–∏ –ø–æ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ñ–∞–π–ª–æ–≤ (–≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ process_pdf_file) –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ –ø—É–ª (executor.submit(...)). executor.submit(...) –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç Future, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –æ–±–µ—â–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ –±—É–¥—É—â–µ–º. –í—Å–µ  Future —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤ —Å–ø–∏—Å–æ–∫ futures.
```
‚îå file1.pdf ‚îê ‚Üí –ü–æ—Ç–æ–∫ 1 ‚Üí process_pdf_file(file1)
‚îå file2.pdf ‚îê ‚Üí –ü–æ—Ç–æ–∫ 2 ‚Üí process_pdf_file(file2)
‚îå file3.pdf ‚îê ‚Üí –ü–æ—Ç–æ–∫ 3 ‚Üí process_pdf_file(file3)
(–∏ —Ç–∞–∫ –¥–∞–ª–µ–µ)
```
–î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è:
process_pdf_file():
   - –æ—Ç–∫—Ä—ã—Ç—å PDF —á–µ—Ä–µ–∑ fitz (PyMuPDF);
   - –∏–∑–≤–ª–µ—á—å —Ç–µ–∫—Å—Ç/–¥–∞–Ω–Ω—ã–µ;
   - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å JSON –≤ output_dir.

   4. –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á (as_completed). as_completed(futures) ‚Äî –∏—Ç–µ—Ä–∞—Ç–æ—Ä, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π Future –æ–±—ä–µ–∫—Ç—ã –ø–æ –º–µ—Ä–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á, –Ω–µ –¥–æ–∂–∏–¥–∞—è—Å—å —Å—Ç—Ä–æ–≥–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞.

```
[Future<file3>] –∑–∞–≤–µ—Ä—à—ë–Ω ‚Üí –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
[Future<file1>] –∑–∞–≤–µ—Ä—à—ë–Ω ‚Üí –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
[Future<file2>] –∑–∞–≤–µ—Ä—à—ë–Ω ‚Üí –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
...

```
5. "–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞"

JSON-—Ñ–∞–π–ª—ã —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `output_dir`.

---

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:

```bash
git clone https://github.com/your-user/my_pdf_scaner.git
cd my_pdf_scaner
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install -r requirements.txt
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:

```bash
flask run
```

4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –Ω–∞ [`http://127.0.0.1:5000`](http://127.0.0.1:5000)
